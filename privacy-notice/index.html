<!DOCTYPE html><html lang="en-us" data-theme="orange-gray"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Privacy Notice - Education Skills Hub</title><meta name="description" content="Summary The International Bank for Reconstruction and Development (IBRD), the International Development Association (IDA), (together the ‚ÄúWorld Bank‚Äù or ‚ÄúBank‚Äù, ‚Äúwe‚Äù or ‚Äúus‚Äù) respect your concerns about privacy. This Privacy Notice applies to the personal data that we collect and handle for the purposes of maintaining and providing Bank-related information&hellip;"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="stylesheet" href="https://edskills.org/media/plugins/staticSearch/static.search.min.css"><link rel="canonical" href="https://edskills.org/privacy-notice/"><meta property="og:title" content="Privacy Notice"><meta property="og:image" content="https://edskills.org/media/website/ro2.png"><meta property="og:image:width" content="1536"><meta property="og:image:height" content="1024"><meta property="og:site_name" content="Education Skills Hub"><meta property="og:description" content="Summary The International Bank for Reconstruction and Development (IBRD), the International Development Association (IDA), (together the ‚ÄúWorld Bank‚Äù or ‚ÄúBank‚Äù, ‚Äúwe‚Äù or ‚Äúus‚Äù) respect your concerns about privacy. This Privacy Notice applies to the personal data that we collect and handle for the purposes of maintaining and providing Bank-related information&hellip;"><meta property="og:url" content="https://edskills.org/privacy-notice/"><meta property="og:type" content="article"><link rel="alternate" type="application/atom+xml" href="https://edskills.org/feed.xml" title="Education Skills Hub - RSS"><link rel="alternate" type="application/json" href="https://edskills.org/feed.json" title="Education Skills Hub - JSON"><link rel="preload" href="https://edskills.org/assets/dynamic/fonts/lexend/lexend.woff2" as="font" type="font/woff2" crossorigin><link rel="stylesheet" href="https://edskills.org/assets/css/style.css?v=7c54d32c6bc2c310dc6a1ffd695dff45"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://edskills.org/privacy-notice/"},"headline":"Privacy Notice","datePublished":"2025-10-07T14:14-05:00","dateModified":"2025-10-07T14:14-05:00","description":"Summary The International Bank for Reconstruction and Development (IBRD), the International Development Association (IDA), (together the ‚ÄúWorld Bank‚Äù or ‚ÄúBank‚Äù, ‚Äúwe‚Äù or ‚Äúus‚Äù) respect your concerns about privacy. This Privacy Notice applies to the personal data that we collect and handle for the purposes of maintaining and providing Bank-related information&hellip;","author":{"@type":"Person","name":"EdSkills Hub","url":"https://edskills.org/authors/world-bank-group/"},"publisher":{"@type":"Organization","name":"EdSkills Hub"}}</script><noscript><style>img[loading] {
                    opacity: 1;
                }</style></noscript><style>.ti{fill:none;stroke-linecap:round;stroke-linejoin:round;vertical-align:middle}</style></head><body class="page-template"><header class="header" id="js-header"><div><a class="logo" href="https://edskills.org/">Education Skills Hub</a><nav class="navbar js-navbar"><button class="navbar__toggle js-toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li class="has-submenu"><a href="https://edskills.org/category/tools/" target="_self" aria-haspopup="true">Tools</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://edskills.org/category/tools/" target="_self">Tools and Resources</a></li><li><a href="https://edskills.org/category/how-to-guides/" target="_self">How-to Guides</a></li><li><a href="https://edskills.org/category/evidence-and-case-studies/" target="_self">Evidence and Case Studies</a></li></ul></li><li><a href="https://edskills.org/about/" target="_self">About</a></li><li><a href="https://edskills.org/partnerships/" target="_self">Partnerships</a></li><li><a href="https://edskills.org/contact/" target="_self">Contact</a></li></ul></nav><div class="search"><div class="search__overlay js-search-overlay"><form action="#search" class="search__form"><input class="search__input" type="search" placeholder="Search" aria-label="Search"> <button type="submit" class="search__button"><span>Search</span></button></form></div><button class="search__btn js-search-btn" aria-label="Search"><svg height="17" width="17"><use xlink:href="https://edskills.org/assets/svg/svg-map.svg#search"/></svg></button></div></div></header><main class="page"><article class="content"><header class="content__inner content__header--centered"><h1 class="h0 content__title">Privacy Notice</h1></header><div class="content__body"><div class="content__inner"><div class="content__entry"><div id="yui_3_18_1_1_1759864411912_26" class="policy_document_summary clearfix mb-1"><h3 id="yui_3_18_1_1_1759864411912_25">Summary</h3><p>The International Bank for Reconstruction and Development (IBRD), the International Development Association (IDA), (together the ‚ÄúWorld Bank‚Äù or ‚ÄúBank‚Äù, ‚Äúwe‚Äù or ‚Äúus‚Äù) respect your concerns about privacy. This Privacy Notice applies to the personal data that we collect and handle for the purposes of maintaining and providing Bank-related information to visitors of this website. For the purposes of this Privacy Notice, ‚Äúpersonal data‚Äù means any information relating to an identified or identifiable individual.</p></div><div id="yui_3_18_1_1_1759864411912_20" class="policy_document_content mt-2"><h3>Full policy</h3><p>The International Bank for Reconstruction and Development (IBRD), the International Development Association (IDA), (together the ‚ÄúWorld Bank‚Äù or ‚ÄúBank‚Äù, ‚Äúwe‚Äù or ‚Äúus‚Äù) respect your concerns about privacy. This Privacy Notice applies to the personal data that we collect and handle for the purposes of maintaining and providing Bank-related information to visitors of this website. For the purposes of this Privacy Notice, ‚Äúpersonal data‚Äù means any information relating to an identified or identifiable individual.</p><h3><strong>Information We Collect</strong></h3><p><strong>Information You Provide to Us</strong></p><p>Any information that you voluntarily provide to us, including your name and email address, will be used for the sole purpose for which the information was provided to us. In addition, communication exchanges on this website are public (not private) communications. Therefore, any message that you post on this website will be considered and treated as available for public use and distribution.</p><p><strong>Information We Collect by Automated Means</strong></p><p>Like many websites, this website use ‚Äúcookies‚Äù and ‚Äúweb beacons‚Äù. ¬†This site uses cookies to optimize functionality and give you the best possible experience. We obtain certain information by automated means when you visit this site, such as the IP address of the device you use to connect to the Internet and the pages accessed. By collecting this information, we learn how to best tailor the website to our visitors. We collect this information through various means, including ‚Äúcookies‚Äù and ‚Äúweb beacons‚Äù. To learn more about cookies,¬†<a target="_blank" href="https://en.wikipedia.org/wiki/HTTP_cookie" rel="noreferrer noopener">click here.</a></p><p><strong>Information We Collect from Third Parties</strong></p><p>This website does not collect any information on you from other sources.</p><h3><strong>Information We Share</strong></h3><p>We do not sell or otherwise disclose personal data collected as set out above, except as described in this Privacy Notice. The information may also be shared with third-party service providers who perform services for the Bank. These service providers are not authorized by the Bank<strong>¬†</strong>to use or disclose the personal data, except as necessary to perform specific services for the Bank. The Bank requires its partners and service providers to appropriately safeguard the privacy and security of personal data they process on the Bank‚Äôs behalf.</p><h3><strong>Specific Purpose of Processing</strong></h3><p>The purpose of data collection on this website is to¬†disseminate information¬†to¬†further the Bank‚Äôs mandate of reducing poverty worldwide and providing research information. We may also collect and process personal data of visitors and subscribers to this website who request email subscription services from us.</p><h3><strong>Types of Processing</strong></h3><p>Any personal data collected on this website is done through manual and automated processes to enroll visitors to the subscription service that they requested. The data collected on this site also undergoes automated processing for the sole purpose of website functionality and user experience. Manual processing may be applied if problems are discovered on the site.</p><h3><strong>How We Protect the Information</strong></h3><p>The Bank maintains appropriate technical and organizational safeguards against unauthorized processing of personal data and against accidental loss, destruction or damage.</p><h3><strong>How Long We Keep the Information</strong></h3><p>Your personal data will be kept only as long as necessary for the purposes set out in this Notice and in accordance with the Bank‚Äôs applicable records retention and disposition schedules.</p><p><strong>World Bank Group Policy Document</strong></p><p>Click¬†<a target="_blank" href="https://ppfdocuments.azureedge.net/ca36fdc4-5191-4d89-a49d-6189a98bad86.pdf" rel="noreferrer noopener">here</a>¬†to view the full document.</p><h3>Request and Review<u></u></h3><p>In accordance with the¬†<a target="_blank" href="https://thedocs.worldbank.org/en/doc/943057e81239587a70c5a6bc39532728-0240012021/original/ca36fdc451914d89a49d6189a98bad86.pdf" rel="noreferrer noopener">World Bank Group Policy Personal Data Privacy</a><strong>¬†</strong>and pursuant to<strong>¬†</strong><a target="_blank" href="https://thedocs.worldbank.org/en/doc/e4fd645661e262698d9dbe8905ec5fbd-0240012021/original/94f0dd39c88740e096b76f88e46da80c.pdf" rel="noreferrer noopener">Personal Data Privacy Request and Review Mechanisms</a>, you may request information regarding the processing of your personal data, subject to reasonable limitations and conditions.¬†To present a request for information please visit the¬†<a href="https://www.worldbank.org/en/programs/accountability/data-privacy#rnr">Data Privacy Request Mechanism</a>¬†page.</p><p>Subject to such limitations and conditions, you may also seek review pursuant to<strong>¬†</strong><a target="_blank" href="https://thedocs.worldbank.org/en/doc/e4fd645661e262698d9dbe8905ec5fbd-0240012021/original/94f0dd39c88740e096b76f88e46da80c.pdf" rel="noreferrer noopener">Bank Directive Personal Data Privacy Request and Review Mechanisms</a><strong>¬†</strong>if you reasonably believe that your personal data has been processed in violation of the World Bank Group Policy Personal Data Privacy. To initiate this process please visit the¬†<a href="https://www.worldbank.org/en/programs/accountability/data-privacy">Data Privacy Review Mechanism</a>¬† page.</p><p><strong>Questions or concerns</strong></p><p>Please contact the Data Privacy Office at¬†<a href="mailto:privacyquestions@worldbank.org">privacyquestions@worldbank.org</a></p></div></div></div></div></article></main><footer class="footer section"><div class="footer__inner"><a class="logo footer__logo" href="https://edskills.org/">Education Skills Hub</a><div class="footer__copyright"><p>¬© ¬†<span id="year"></span> World Bank Group. All Rights Reserved.</p></div><div class="footer__nav"><ul class="footer__nav"><li><a href="https://worldbank.org" target="_self">World Bank Group</a></li><li class="active"><a href="https://edskills.org/privacy-notice/" target="_self">Privacy</a></li><li><a href="https://edskills.org/#cookie-settings" target="_self">Cookie preferences</a></li></ul></div></div><button class="footer__bttop js-scroll-to-top" aria-label="Back to top" title="Back to top"><svg><use xlink:href="https://edskills.org/assets/svg/svg-map.svg#toparrow"/></svg></button></footer><script defer="defer" src="https://edskills.org/assets/js/scripts.min.js?v=8680a80b5605dca08d4eef4416e29e9f"></script><script>window.publiiThemeMenuConfig = {    
      mobileMenuMode: 'sidebar',
      animationSpeed: 300,
      submenuWidth: 'auto',
      doubleClickTime: 500,
      mobileMenuExpandableSubmenus: true, 
      relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script>var images = document.querySelectorAll('img[loading]');

      for (var i = 0; i < images.length; i++) {
         if (images[i].complete) {
               images[i].classList.add('is-loaded');
         } else {
               images[i].addEventListener('load', function () {
                  this.classList.add('is-loaded');
               }, false);
         }
      }</script><script>document.getElementById("year").innerHTML = new Date().getFullYear()</script><script>window.publiiStaticSearchConfig = { 
					baseURL: 'https://edskills.org',
					minCharCount: 3,
					maxResultsCount: 20,
					showPopupOnInputClick: false,
					customTriggerSelector: '',
					engineSettings: {
						tokenize: 'forward',
						charset: 'latin:extra',
						language: 'en-GB',
						cache: false,
						suggest: true
					},
					indexSettings: {
						resultsDescription: 'off',
						indexPostTitles: true,
						indexPostExcerpts: true,
						indexPostHeadings: true,
						indexPostAuthors: true,
						indexPostMetaDescription: true,
						indexPageTitles: true,
						indexPageExcerpts: true,
						indexPageHeadings: true,
						indexPageMetaDescription: true,
						indexTagNames: true,
						indexTagDescription: true,
						indexTagMetaDescription: true,
						indexPostConfig: false,
						indexPageConfig: false
					},
					translations: {
						inputPlaceholder: 'Search...',
						searchEmptyState: 'Type to start a search',
						tooShortPhraseState: 'Enter at least 3 characters to search...',
						noResults: 'No results found!',
						buttonClose: 'Close'
					}
				};</script><script src="https://edskills.org/media/plugins/staticSearch/flexsearch.bundle.js"></script><script src="https://edskills.org/media/plugins/staticSearch/static.search.min.js"></script><div class="pcb" data-behaviour="link" data-behaviour-link="#cookie-settings" data-revision="1" data-config-ttl="90" data-debug-mode="false"><div role="dialog" aria-modal="true" aria-hidden="true" aria-labelledby="pcb-title" aria-describedby="pcb-txt" class="pcb__banner"><div class="pcb__inner"><div id="pcb-title" role="heading" aria-level="2" class="pcb__title">This website uses cookies</div><div id="pcb-txt" class="pcb__txt">This website uses functional cookies to ensure that its features work properly. We do not use cookies for analytics, advertising, or tracking. By continuing to browse or use this site, you agree to the use of essential cookies required for normal operation. <a href="https://edskills.org/privacy-notice/">More details...</a></div><div class="pcb__buttons"><button type="button" class="pcb__btn pcb__btn--solid pcb__btn--accept">Accept all</button></div></div></div></div><script>(function(win) {
    if (!document.querySelector('.pcb')) {
        return;
    }

    var cbConfig = {
        behaviour: document.querySelector('.pcb').getAttribute('data-behaviour'),
        behaviourLink: document.querySelector('.pcb').getAttribute('data-behaviour-link'),
        revision: document.querySelector('.pcb').getAttribute('data-revision'),
        configTTL: parseInt(document.querySelector('.pcb').getAttribute('data-config-ttl'), 10),
        debugMode: document.querySelector('.pcb').getAttribute('data-debug-mode') === 'true',
        initialState: null,
        initialLsState: null,
        previouslyAccepted: []
    };

    var cbUI = {
        wrapper: document.querySelector('.pcb'),
        banner: {
            element: null,
            btnAccept: null,
            btnReject: null,
            btnConfigure: null
        },
        popup: {
            element: null,
            btnClose: null,
            btnSave: null,
            btnAccept: null,
            btnReject: null,
            checkboxes: null,
        },
        overlay: null,
        badge: null,
        blockedScripts: document.querySelectorAll('script[type^="gdpr-blocker/"]'),
        triggerLinks: cbConfig.behaviourLink ? document.querySelectorAll('a[href*="' + cbConfig.behaviourLink + '"]') : null
    };

    function initUI () {
        // setup banner elements
        cbUI.banner.element = cbUI.wrapper.querySelector('.pcb__banner');
        cbUI.banner.btnAccept = cbUI.banner.element.querySelector('.pcb__btn--accept');
        cbUI.banner.btnReject = cbUI.banner.element.querySelector('.pcb__btn--reject');
        cbUI.banner.btnConfigure = cbUI.banner.element.querySelector('.pcb__btn--configure');

        // setup popup elements
        if (cbUI.wrapper.querySelector('.pcb__popup')) {
            cbUI.popup.element = cbUI.wrapper.querySelector('.pcb__popup');
            cbUI.popup.btnClose = cbUI.wrapper.querySelector('.pcb__popup__close');
            cbUI.popup.btnSave = cbUI.popup.element.querySelector('.pcb__btn--save');
            cbUI.popup.btnAccept = cbUI.popup.element.querySelector('.pcb__btn--accept');
            cbUI.popup.btnReject = cbUI.popup.element.querySelector('.pcb__btn--reject');
            cbUI.popup.checkboxes = cbUI.popup.element.querySelector('input[type="checkbox"]');
            // setup overlay
            cbUI.overlay = cbUI.wrapper.querySelector('.pcb__overlay');
        }

        cbUI.badge = cbUI.wrapper.querySelector('.pcb__badge');

        if (cbConfig.behaviour.indexOf('link') > -1) {
            for (var i = 0; i < cbUI.triggerLinks.length; i++) {
                cbUI.triggerLinks[i].addEventListener('click', function(e) {
                    e.preventDefault();
                    showBannerOrPopup();
                });
            }
        }
    }

    function initState () {
        var lsKeyName = getConfigName();
        var currentConfig = localStorage.getItem(lsKeyName);
        var configIsFresh = checkIfConfigIsFresh();

        if (!configIsFresh || currentConfig === null) {
            if (cbConfig.debugMode) {
                console.log('üç™ Config not found, or configuration expired');
            }

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                    'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                    'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                    'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                    'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                    'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                    'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                });  
                
                if (cbConfig.debugMode) {
                    console.log('üç™ GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': window.publiiCBGCM.defaultState.ad_storage ? 'granted' : 'denied',
                        'ad_personalization': window.publiiCBGCM.defaultState.ad_personalization ? 'granted' : 'denied',
                        'ad_user_data': window.publiiCBGCM.defaultState.ad_user_data ? 'granted' : 'denied',
                        'analytics_storage': window.publiiCBGCM.defaultState.analytics_storage ? 'granted' : 'denied',
                        'personalization_storage': window.publiiCBGCM.defaultState.personalization_storage ? 'granted' : 'denied',
                        'functionality_storage': window.publiiCBGCM.defaultState.functionality_storage ? 'granted' : 'denied',
                        'security_storage': window.publiiCBGCM.defaultState.security_storage ? 'granted' : 'denied'
                    }));
                }
            }

            showBanner();
        } else if (typeof currentConfig === 'string') {
            if (cbConfig.debugMode) {
                console.log('üç™ Config founded');
            }

            cbConfig.initialLsState = currentConfig.split(',');

            if (window.publiiCBGCM) {
                gtag('consent', 'default', {
                    'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                    'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                    'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                    'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                    'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                    'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                    'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                });
                
                if (cbConfig.debugMode) {
                    console.log('üç™ GCMv2 DEFAULT STATE: ' + JSON.stringify({
                        'ad_storage': getDefaultConsentState(currentConfig, 'ad_storage'),
                        'ad_personalization': getDefaultConsentState(currentConfig, 'ad_personalization'),
                        'ad_user_data': getDefaultConsentState(currentConfig, 'ad_user_data'),
                        'analytics_storage': getDefaultConsentState(currentConfig, 'analytics_storage'),
                        'personalization_storage': getDefaultConsentState(currentConfig, 'personalization_storage'),
                        'functionality_storage': getDefaultConsentState(currentConfig, 'functionality_storage'),
                        'security_storage': getDefaultConsentState(currentConfig, 'security_storage')
                    }));
                }
            }

            showBadge();

            if (cbUI.popup.element) {
                var allowedGroups = currentConfig.split(',');
                var checkedCheckboxes = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');

                for (var j = 0; j < checkedCheckboxes.length; j++) {
                    var name = checkedCheckboxes[j].getAttribute('data-group-name');

                    if (name && name !== '-' && allowedGroups.indexOf(name) === -1) {
                        checkedCheckboxes[j].checked = false;
                    }
                }

                for (var i = 0; i < allowedGroups.length; i++) {
                    var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + allowedGroups[i] + '"]');

                    if (checkbox) {
                        checkbox.checked = true;
                    }

                    allowCookieGroup(allowedGroups[i]);
                }
            }
        }

        setTimeout(function () {
            cbConfig.initialState = getInitialStateOfConsents();
        }, 0);
    }

    function checkIfConfigIsFresh () {
        var lastConfigSave = localStorage.getItem('publii-gdpr-cookies-config-save-date');

        if (lastConfigSave === null) {
            return false;
        }

        lastConfigSave = parseInt(lastConfigSave, 10);

        if (lastConfigSave === 0) {
            return true;
        }

        if (+new Date() - lastConfigSave < cbConfig.configTTL * 24 * 60 * 60 * 1000) {
            return true;
        }

        return false;
    }

    function getDefaultConsentState (currentConfig, consentGroup) {
        let configGroups = currentConfig.split(',');

        for (let i = 0; i < configGroups.length; i++) {
            let groupName = configGroups[i];
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === groupName);

            if (group && group[consentGroup]) {
                return 'granted';
            }
        }  
        
        if (window.publiiCBGCM.defaultState[consentGroup]) {
            return 'granted'; 
        }
        
        return 'denied';
    }

    function initBannerEvents () {
        cbUI.banner.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('banner');
            showBadge();
        }, false);

        if (cbUI.banner.btnReject) {
            cbUI.banner.btnReject.addEventListener('click', function (e) {
                e.preventDefault();
                rejectAllCookies();
                showBadge();
            }, false);
        }

        if (cbUI.banner.btnConfigure) {
            cbUI.banner.btnConfigure.addEventListener('click', function (e) {
                e.preventDefault();
                hideBanner();
                showAdvancedPopup();
                showBadge();
            }, false);
        }
    }

    function initPopupEvents () {
        if (!cbUI.popup.element) {
            return;
        }

        cbUI.overlay.addEventListener('click', function (e) {
            hideAdvancedPopup();
        }, false);

        cbUI.popup.element.addEventListener('click', function (e) {
            e.stopPropagation();
        }, false);

        cbUI.popup.btnAccept.addEventListener('click', function (e) {
            e.preventDefault();
            acceptAllCookies('popup');
        }, false);

        cbUI.popup.btnReject.addEventListener('click', function (e) {
            e.preventDefault();
            rejectAllCookies();
        }, false);

        cbUI.popup.btnSave.addEventListener('click', function (e) {
            e.preventDefault();
            saveConfiguration();
        }, false);

        cbUI.popup.btnClose.addEventListener('click', function (e) {
            e.preventDefault();
            hideAdvancedPopup();
        }, false);
    }

    function initBadgeEvents () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.addEventListener('click', function (e) {
            showBannerOrPopup();
        }, false);
    }

    initUI();
    initState();
    initBannerEvents();
    initPopupEvents();
    initBadgeEvents();

    /**
     * API
     */
    function addScript (src, inline) {
        var newScript = document.createElement('script');

        if (src) {
            newScript.setAttribute('src', src);
        }

        if (inline) {
            newScript.text = inline;
        }

        document.body.appendChild(newScript);
    }

    function allowCookieGroup (allowedGroup) {
        var scripts = document.querySelectorAll('script[type="gdpr-blocker/' + allowedGroup + '"]');
        cbConfig.previouslyAccepted.push(allowedGroup);
    
        for (var j = 0; j < scripts.length; j++) {
            addScript(scripts[j].src, scripts[j].text);
        }

        var groupEvent = new Event('publii-cookie-banner-unblock-' + allowedGroup);
        document.body.dispatchEvent(groupEvent);
        unlockEmbeds(allowedGroup);

        if (cbConfig.debugMode) {
            console.log('üç™ Allowed group: ' + allowedGroup);
        }

        if (window.publiiCBGCM && (!cbConfig.initialLsState || cbConfig.initialLsState.indexOf(allowedGroup) === -1)) {
            let consentResult = {};
            let group = window.publiiCBGCM.groups.find(group => group.cookieGroup === allowedGroup);

            if (group) {
                let foundSomeConsents = false;

                Object.keys(group).forEach(key => {
                    if (key !== 'cookieGroup' && group[key] === true) {
                        consentResult[key] = 'granted';
                        foundSomeConsents = true;
                    }
                });

                if (foundSomeConsents) {
                    gtag('consent', 'update', consentResult);   

                    if (cbConfig.debugMode) {
                        console.log('üç™ GCMv2 UPDATE: ' + JSON.stringify(consentResult));
                    }
                }
            }
        }
    }

    function showBannerOrPopup () {
        if (cbUI.popup.element) {
            showAdvancedPopup();
        } else {
            showBanner();
        }
    }

    function showAdvancedPopup () {
        cbUI.popup.element.classList.add('is-visible');
        cbUI.overlay.classList.add('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'false');
        cbUI.overlay.setAttribute('aria-hidden', 'false');
    }

    function hideAdvancedPopup () {
        cbUI.popup.element.classList.remove('is-visible');
        cbUI.overlay.classList.remove('is-visible');
        cbUI.popup.element.setAttribute('aria-hidden', 'true');
        cbUI.overlay.setAttribute('aria-hidden', 'true');
    }

    function showBanner () {
        cbUI.banner.element.classList.add('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'false');
    }

    function hideBanner () {
        cbUI.banner.element.classList.remove('is-visible');
        cbUI.banner.element.setAttribute('aria-hidden', 'true');
    }

    function showBadge () {
        if (!cbUI.badge) {
            return;
        }

        cbUI.badge.classList.add('is-visible');
        cbUI.badge.setAttribute('aria-hidden', 'false');
    }

    function getConfigName () {
        var lsKeyName = 'publii-gdpr-allowed-cookies';

        if (cbConfig.revision) {
            lsKeyName = lsKeyName + '-v' + parseInt(cbConfig.revision, 10);
        }

        return lsKeyName;
    }

    function storeConfiguration (allowedGroups) {
        var lsKeyName = getConfigName();
        var dataToStore = allowedGroups.join(',');
        localStorage.setItem(lsKeyName, dataToStore);

        if (cbConfig.configTTL === 0) {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', 0);

            if (cbConfig.debugMode) {
                console.log('üç™ Store never expiring configuration');
            }
        } else {
            localStorage.setItem('publii-gdpr-cookies-config-save-date', +new Date());
        }
    }

    function getInitialStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ Initial state: ' + groups.join(', '));
        }

        return groups;
    }

    function getCurrentStateOfConsents () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]:checked');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ State to save: ' + groups.join(', '));
        }

        return groups;
    }

    function getAllGroups () {
        if (!cbUI.popup.element) {
            return [];
        }

        var checkedGroups = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');
        var groups = [];

        for (var i = 0; i < checkedGroups.length; i++) {
            var allowedGroup = checkedGroups[i].getAttribute('data-group-name');

            if (allowedGroup !== '') {
                groups.push(allowedGroup);
            }
        }

        return groups;
    }

    function acceptAllCookies (source) {
        var groupsToAccept = getAllGroups();
        storeConfiguration(groupsToAccept);

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        if (cbUI.popup.element) {
            var checkboxesToCheck = cbUI.popup.element.querySelectorAll('input[type="checkbox"]');

            for (var j = 0; j < checkboxesToCheck.length; j++) {
                checkboxesToCheck[j].checked = true;
            }
        }

        if (cbConfig.debugMode) {
            console.log('üç™ Accept all cookies: ', groupsToAccept.join(', '));
        }

        if (source === 'popup') {
            hideAdvancedPopup();
        } else if (source === 'banner') {
            hideBanner();
        }
    }

    function rejectAllCookies () {
        if (cbConfig.debugMode) {
            console.log('üç™ Reject all cookies');
        }

        storeConfiguration([]);
        setTimeout(function () {
            window.location.reload();
        }, 100);
    }

    function saveConfiguration () {
        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('üç™ Save new config: ', groupsToAccept.join(', '));
        }

        if (reloadIsNeeded(groupsToAccept)) {
            setTimeout(function () {
                window.location.reload();
            }, 100);
            return;
        }

        for (var i = 0; i < groupsToAccept.length; i++) {
            var group = groupsToAccept[i];

            if (cbConfig.initialState.indexOf(group) > -1 || cbConfig.previouslyAccepted.indexOf(group) > -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Skip previously activated group: ' + group);
                }

                continue;
            }

            allowCookieGroup(group);
        }

        hideAdvancedPopup();
    }

    function reloadIsNeeded (groupsToAccept) {
        // check if user rejected consent for initial groups
        var initialGroups = cbConfig.initialState;
        var previouslyAcceptedGroups = cbConfig.previouslyAccepted;
        var groupsToCheck = initialGroups.concat(previouslyAcceptedGroups);

        for (var i = 0; i < groupsToCheck.length; i++) {
            var groupToCheck = groupsToCheck[i];

            if (groupToCheck !== '' && groupsToAccept.indexOf(groupToCheck) === -1) {
                if (cbConfig.debugMode) {
                    console.log('üç™ Reload is needed due lack of: ', groupToCheck);
                }

                return true;
            }
        }

        return false;
    }

    function unlockEmbeds (cookieGroup) {
        var iframesToUnlock = document.querySelectorAll('.pec-wrapper[data-consent-group-id="' + cookieGroup + '"]');

        for (var i = 0; i < iframesToUnlock.length; i++) {
            var iframeWrapper = iframesToUnlock[i];
            iframeWrapper.querySelector('.pec-overlay').classList.remove('is-active');
            iframeWrapper.querySelector('.pec-overlay').setAttribute('aria-hidden', 'true');
            var iframe = iframeWrapper.querySelector('iframe');
            iframe.setAttribute('src', iframe.getAttribute('data-consent-src'));
        }
    }

    win.publiiEmbedConsentGiven = function (cookieGroup) {
        // it will unlock embeds
        allowCookieGroup(cookieGroup);

        var checkbox = cbUI.popup.element.querySelector('input[type="checkbox"][data-group-name="' + cookieGroup + '"]');

        if (checkbox) {
            checkbox.checked = true;
        }

        var groupsToAccept = getCurrentStateOfConsents();
        storeConfiguration(groupsToAccept);

        if (cbConfig.debugMode) {
            console.log('üç™ Save new config: ', groupsToAccept.join(', '));
        }
    }
})(window);</script></body></html>